{"_id":"step","_rev":"41-c4ba2083eef988d0c09d973cf01f9b43","name":"step","description":"A simple control-flow library for node.JS that makes parallel execution, serial execution, and error handling painless.","dist-tags":{"latest":"0.0.6"},"versions":{"0.0.3":{"name":"step","version":"0.0.3","description":"A simple control-flow library for node.JS that makes parallel execution, serial execution, and error handling painless.","engine":["node >=0.1.90"],"author":{"name":"Tim Caswell","email":"tim@creationix.com"},"repository":{"type":"git","url":"http://github.com/creationix/step.git"},"main":"lib/step","_id":"step@0.0.3","engines":{"node":"*"},"_nodeSupported":true,"_npmVersion":"0.2.7-2","_nodeVersion":"v0.3.1-pre","dist":{"tarball":"http://registry.npmjs.org/step/-/step-0.0.3.tgz","shasum":"e6c5d39b4c2260b5457329bf2ce739e740a7c304"}},"0.0.4":{"name":"step","version":"0.0.4","description":"A simple control-flow library for node.JS that makes parallel execution, serial execution, and error handling painless.","engine":["node >=0.2.0"],"author":{"name":"Tim Caswell","email":"tim@creationix.com"},"repository":{"type":"git","url":"http://github.com/creationix/step.git"},"main":"lib/step","_id":"step@0.0.4","engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"0.2.17","_nodeVersion":"v0.4.0","directories":{"lib":"./lib"},"files":[""],"_defaultsLoaded":true,"dist":{"shasum":"f334ebc6ddb406cab5084375a05c26e173d0214f","tarball":"http://registry.npmjs.org/step/-/step-0.0.4.tgz"}},"0.0.5":{"name":"step","version":"0.0.5","description":"A simple control-flow library for node.JS that makes parallel execution, serial execution, and error handling painless.","engine":["node >=0.2.0"],"author":{"name":"Tim Caswell","email":"tim@creationix.com"},"repository":{"type":"git","url":"git://github.com/creationix/step.git"},"main":"lib/step","_npmUser":{"name":"creationix","email":"tim@creationix.com"},"_id":"step@0.0.5","dependencies":{},"devDependencies":{},"engines":{"node":"*"},"_engineSupported":true,"_npmVersion":"1.0.99","_nodeVersion":"v0.4.12","_defaultsLoaded":true,"dist":{"shasum":"5e662f15f9ba2ece9c3a9b0e2553d1986b6ba44c","tarball":"http://registry.npmjs.org/step/-/step-0.0.5.tgz"},"maintainers":[{"name":"creationix","email":"tim@creationix.com"}]},"0.0.6":{"name":"step","version":"0.0.6","description":"A simple control-flow library for node.JS that makes parallel execution, serial execution, and error handling painless.","engine":["node >=0.2.0"],"author":{"name":"Tim Caswell","email":"tim@creationix.com"},"license":"MIT","repository":{"type":"git","url":"git+ssh://git@github.com/creationix/step.git"},"main":"lib/step","gitHead":"11c5a85aa2d6f016ec8eee16d9817f3798d8ee43","bugs":{"url":"https://github.com/creationix/step/issues"},"homepage":"https://github.com/creationix/step#readme","_id":"step@0.0.6","scripts":{},"_shasum":"143e7849a5d7d3f4a088fe29af94915216eeede2","_from":".","_npmVersion":"2.9.0","_nodeVersion":"2.0.1","_npmUser":{"name":"creationix","email":"tim@creationix.com"},"dist":{"shasum":"143e7849a5d7d3f4a088fe29af94915216eeede2","tarball":"http://registry.npmjs.org/step/-/step-0.0.6.tgz"},"maintainers":[{"name":"creationix","email":"tim@creationix.com"}]}},"maintainers":[{"name":"creationix","email":"tim@creationix.com"}],"author":{"name":"Tim Caswell","email":"tim@creationix.com"},"repository":{"type":"git","url":"git+ssh://git@github.com/creationix/step.git"},"time":{"modified":"2015-06-30T15:56:06.244Z","created":"2011-02-21T20:52:21.286Z","0.0.3":"2011-02-21T20:52:21.286Z","0.0.4":"2011-02-21T20:52:21.286Z","0.0.5":"2011-10-27T16:50:49.100Z","0.0.6":"2015-06-30T15:56:06.244Z"},"users":{"creationix":true,"pid":true,"vasc":true,"fgribreau":true,"andrewshell":true,"lihebi":true,"magemagic":true,"scull7":true,"maxbeatty":true,"maobean":true,"johnnyeven":true,"chzhewl":true,"weigang":true,"staraple":true,"tianyk":true,"vanielf":true,"kontrax":true,"ssh0702":true,"joshuabriter":true},"readme":"# Step\n\nA simple control-flow library for node.JS that makes parallel execution, serial execution, and error handling painless.\n\n## How to install\n\nSimply copy or link the lib/step.js file into your `$HOME/.node_libraries` folder.\n\n## How to use\n\nThe step library exports a single function I call `Step`.  It accepts any number of functions as arguments and runs them in serial order using the passed in `this` context as the callback to the next step.\n\n    Step(\n      function readSelf() {\n        fs.readFile(__filename, this);\n      },\n      function capitalize(err, text) {\n        if (err) throw err;\n        return text.toUpperCase();\n      },\n      function showIt(err, newText) {\n        if (err) throw err;\n        console.log(newText);\n      }\n    );\n\nNotice that we pass in `this` as the callback to `fs.readFile`.  When the file read completes, step will send the result as the arguments to the next function in the chain.  Then in the `capitalize` function we're doing synchronous work so we can simple return the new value and Step will route it as if we called the callback.\n\nThe first parameter is reserved for errors since this is the node standard.  Also any exceptions thrown are caught and passed as the first argument to the next function.  As long as you don't nest callback functions inline your main functions this prevents there from ever being any uncaught exceptions.  This is very important for long running node.JS servers since a single uncaught exception can bring the whole server down.\n\nAlso there is support for parallel actions:\n\n    Step(\n      // Loads two files in parallel\n      function loadStuff() {\n        fs.readFile(__filename, this.parallel());\n        fs.readFile(\"/etc/passwd\", this.parallel());\n      },\n      // Show the result when done\n      function showStuff(err, code, users) {\n        if (err) throw err;\n        console.log(code);\n        console.log(users);\n      }\n    )\n\nHere we pass `this.parallel()` instead of `this` as the callback.  It internally keeps track of the number of callbacks issued and preserves their order then giving the result to the next step after all have finished.  If there is an error in any of the parallel actions, it will be passed as the first argument to the next step.\n\nAlso you can use group with a dynamic number of common tasks.\n\n    Step(\n      function readDir() {\n        fs.readdir(__dirname, this);\n      },\n      function readFiles(err, results) {\n        if (err) throw err;\n        // Create a new group\n        var group = this.group();\n        results.forEach(function (filename) {\n          if (/\\.js$/.test(filename)) {\n            fs.readFile(__dirname + \"/\" + filename, 'utf8', group());\n          }\n        });\n      },\n      function showAll(err , files) {\n        if (err) throw err;\n        console.dir(files);\n      }\n    );\n\n*Note* that we both call `this.group()` and `group()`.  The first reserves a slot in the parameters of the next step, then calling `group()` generates the individual callbacks and increments the internal counter.\n","readmeFilename":"README.markdown","homepage":"https://github.com/creationix/step#readme","bugs":{"url":"https://github.com/creationix/step/issues"},"license":"MIT"}