{"_id":"mic","_rev":"10-c96d4805bddd4b5d555127a763e2e2ab","name":"mic","time":{"modified":"2016-02-07T04:50:28.162Z","created":"2015-05-02T20:20:38.221Z","0.1.0":"2015-05-02T20:20:38.221Z","1.0.0":"2016-01-26T16:27:07.963Z","1.0.1":"2016-01-26T16:31:49.051Z","1.0.2":"2016-01-26T16:34:34.863Z","1.0.3":"2016-01-26T16:36:49.628Z","2.0.0":"2016-02-06T12:23:20.611Z","2.0.1":"2016-02-07T04:50:28.162Z"},"maintainers":[{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"}],"dist-tags":{"latest":"2.0.1"},"description":"A simple stream wrapper for arecord (Linux (including Raspbian)) and sox (Mac/Windows). Returns a Passthrough stream object so that stream control like pause(), resume(), pipe(), etc. are all available.","readme":"# mic\nA simple stream wrapper for arecord (Linux (including Raspbian)) and sox (Mac/Windows). Returns a Mic object that supports a flexible API to control: start, stop, pause, resume functionality. Also it provides access to the audioStream object that provides evented notifications for 'startComplete', 'stopComplete', 'pauseComplete', 'resumeComplete', 'silence' and 'processExitComplete'. You can use this signals to control various states.\n\nThis is a cross platform library that has been tested on both my MacbookPro as well as my Raspberry Pi and it works very well on both these platforms. I haven't tested this on Windows, but it should work as long as you have installed either sox OR alsa tools. Here are my node versions on raspberry pi:\n\n```\n$ npm version\n{ mic: '2.0.0',\n  npm: '3.3.12',\n  ares: '1.10.1-DEV',\n  http_parser: '2.6.0',\n  icu: '56.1',\n  modules: '47',\n  node: '5.3.0',\n  openssl: '1.0.2e',\n  uv: '1.7.5',\n  v8: '4.6.85.31',\n  zlib: '1.2.8' }\n```\n\nInstallation\n============\nThis module depends on your machine having an installation of sox (Mac/Windows Users) OR ALSA tools for Linux. You can use this library to record from any microphone device.\nBefore installing and experimenting with the mic module, you need to ensure that you are able to capture audio via the command line:\n\n```\n$ arecord temp.wav\n```\nOR\n```\n$ rec temp.wav\n```\nTo get ALSA tools on Raspberry Pi running raspbian, try the following:\n```\n$ sudo apt-get update\n$ sudo apt-get upgrade\n$ sudo apt-get install alsa-base alsa-utils\n```\n\nAfter the above is tested and validated, you can proceed to install the module using:\n\n```\n$ npm install mic\n```\n\nAPI\n============\nBelow is an example of how to use the module. \n```javascript\nvar mic = require('mic');\nvar fs = require('fs');\n\nvar micInstance = mic({ 'rate': '16000', 'channels': '1', 'debug': true, 'exitOnSilence': 6 });\nvar micInputStream = micInstance.getAudioStream();\n\nvar outputFileStream = fs.WriteStream('output.raw');\n\nmicInputStream.pipe(outputFileStream);\n\nmicInputStream.on('data', function(data) {\n    console.log(\"Recieved Input Stream: \" + data.length);\n});\n\nmicInputStream.on('error', function(err) {\n    cosole.log(\"Error in Input Stream: \" + err);\n});\n\nmicInputStream.on('startComplete', function() {\n        console.log(\"Got SIGNAL startComplete\");\n        setTimeout(function() {\n                micInstance.pause();\n            }, 5000);\n    });\n    \nmicInputStream.on('stopComplete', function() {\n        console.log(\"Got SIGNAL stopComplete\");\n    });\n    \nmicInputStream.on('pauseComplete', function() {\n        console.log(\"Got SIGNAL pauseComplete\");\n        setTimeout(function() {\n                micInstance.resume();\n            }, 5000);\n    });\n\nmicInputStream.on('resumeComplete', function() {\n        console.log(\"Got SIGNAL resumeComplete\");\n        setTimeout(function() {\n                micInstance.stop();\n            }, 5000);\n    });\n\nmicInputStream.on('silence', function() {\n        console.log(\"Got SIGNAL silence\");\n    });\n\nmicInputStream.on('processExitComplete', function() {\n        console.log(\"Got SIGNAL processExitComplete\");\n    });\n\nmicInstance.start();\n```\n\nYou should be able to playback the output file using. Note that arecord pipes the 44 byte WAV header, whereas SOX does NOT add any header. So we need to provide the file format details to the player:\n\n```\n$ aplay -f S16_LE -r 16000 -c 1 output.raw\n```\nOR\n```\n$ play -b 16 -e signed -c 1 -r 16000 output.raw\n```\n\n### mic(options)\nReturns a microphone object instance that can be used to control the streaming samples coming in from the specified device.\n* `options` - JSON containing command line options. Following are valid options:\n    * `endian`: `big` OR `little`, default: `little`\n    * `bitwidth`: `8` OR `16` OR `24` OR anything valid supported by arecord OR sox, default: `16`\n    * `encoding`: `signed-integer` OR `unsinged-integer` (none of the other encoding formats are supported), default:`signed-integer`\n    * `rate`: `8000` OR `16000` OR `44100` OR anything valid supported by arecord OR sox, default: `16000`\n    * `channels`: `1` OR `2` OR anything valid supported by arecord OR sox, default: `1` (mono)\n    * `device`: `hw:0,0` OR `plughw:1, 0` OR anything valid supported by arecord. Ignored for sox on macOS.\n    * `exitOnSilence`: The `'silence'` signal is raised after reaching these many consecutive frames, default: '0'\n    * `debug`: true OR false - can be used to aide in debugging\n\n### mic.start()\nThis instantiates the process `arecord` OR `sox` using the options specified\n\n### mic.stop()\nThis kills the arecord OR sox process that was started in the start() routine. It uses the `SIGTERM` signal.\n\n### mic.pause()\nThis pauses the arecord OR sox process using the `SIGSTOP` signal.\n\n### mic.resume()\nThis resumes the arecord OR sox process using the `SIGCONT` signal.\n\n### mic.getAudioStream()\nThis returns a simple Transform stream that contains the data from the arecord OR sox process. This sream can be directly piped to a speaker sream OR a file stream. Further this provides a number of events triggered by the state of the stream:\n* `'silence'`: This is emitted once when `exitOnSilence` number of consecutive frames of silence are found\n* `'processExitComplete'`: This is emitted once the arecord OR sox process exits\n* `'startComplete'`: This is emitted once the start() function is successfully executed\n* `'stopComplete'`: This is emitted once the stop() function is successfully executed\n* `'pauseComplete'`: This is emitted once the pause() function is successfully executed\n* `'resumeComplete'`: This is emitted once the resume() function is successfully executed\n* It further inherits all the Events from [stream.Transform](http://nodejs.org/api/stream.html#stream_class_stream_transform)\n\n\nLicense\n==========\nThe MIT License (MIT)\n\nCopyright (c) 2016 Ashish Bajaj bajaj.ashish@gmail.com\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n","versions":{"1.0.0":{"name":"mic","version":"1.0.0","description":"A simple stream wrapper for arecord (Linux (including Raspbian), Windows) and sox (Mac). Returns a Passthrough stream object so that stream control like pause(), resume(), pipe(), etc. are all available.","main":"index.js","scripts":{"test":"node tests/test.js"},"repository":{"type":"git","url":"git+https://github.com/ashishbajaj99/mic.git"},"keywords":["node-mic","microphone","sox","alsa","arecord","mic","audio","input"],"author":{"name":"Ashish Bajaj","email":"bajaj.ashish@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/ashishbajaj99/mic/issues"},"homepage":"https://github.com/ashishbajaj99/mic#readme","gitHead":"0eeef27453832edd7cfe0ef223674e4b9be24db5","_id":"mic@1.0.0","_shasum":"01f778af9ee3eb7cf6cec502137154f13f35c1db","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.3.0","_npmUser":{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"},"dist":{"shasum":"01f778af9ee3eb7cf6cec502137154f13f35c1db","tarball":"http://registry.npmjs.org/mic/-/mic-1.0.0.tgz"},"maintainers":[{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"}],"directories":{}},"1.0.1":{"name":"mic","version":"1.0.1","description":"A simple stream wrapper for arecord (Linux (including Raspbian)) and sox (Mac/Windows). Returns a Passthrough stream object so that stream control like pause(), resume(), pipe(), etc. are all available.","main":"index.js","scripts":{"test":"node tests/test.js"},"repository":{"type":"git","url":"git+https://github.com/ashishbajaj99/mic.git"},"keywords":["node-mic","microphone","sox","alsa","arecord","mic","audio","input"],"author":{"name":"Ashish Bajaj","email":"bajaj.ashish@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/ashishbajaj99/mic/issues"},"homepage":"https://github.com/ashishbajaj99/mic#readme","gitHead":"4b4fbd9fd8a20d5837509604c52fd4efe7b44ba6","_id":"mic@1.0.1","_shasum":"f27c639fb4577aa6bbdd038e1d158c338f93a948","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.3.0","_npmUser":{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"},"dist":{"shasum":"f27c639fb4577aa6bbdd038e1d158c338f93a948","tarball":"http://registry.npmjs.org/mic/-/mic-1.0.1.tgz"},"maintainers":[{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"}],"directories":{}},"1.0.2":{"name":"mic","version":"1.0.2","description":"A simple stream wrapper for arecord (Linux (including Raspbian)) and sox (Mac/Windows). Returns a Passthrough stream object so that stream control like pause(), resume(), pipe(), etc. are all available.","main":"index.js","scripts":{"test":"node tests/test.js"},"repository":{"type":"git","url":"git+https://github.com/ashishbajaj99/mic.git"},"keywords":["node-mic","microphone","sox","alsa","arecord","mic","audio","input"],"author":{"name":"Ashish Bajaj","email":"bajaj.ashish@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/ashishbajaj99/mic/issues"},"homepage":"https://github.com/ashishbajaj99/mic#readme","gitHead":"55afdd9d4279e92f3feb97da5f1588bc48fd573f","_id":"mic@1.0.2","_shasum":"4cc1b19827f1450f2db32eb4b2f0e833f280c7c4","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.3.0","_npmUser":{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"},"dist":{"shasum":"4cc1b19827f1450f2db32eb4b2f0e833f280c7c4","tarball":"http://registry.npmjs.org/mic/-/mic-1.0.2.tgz"},"maintainers":[{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"}],"directories":{}},"1.0.3":{"name":"mic","version":"1.0.3","description":"A simple stream wrapper for arecord (Linux (including Raspbian)) and sox (Mac/Windows). Returns a Passthrough stream object so that stream control like pause(), resume(), pipe(), etc. are all available.","main":"index.js","scripts":{"test":"node tests/test.js"},"repository":{"type":"git","url":"git+https://github.com/ashishbajaj99/mic.git"},"keywords":["node-mic","microphone","sox","alsa","arecord","mic","audio","input"],"author":{"name":"Ashish Bajaj","email":"bajaj.ashish@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/ashishbajaj99/mic/issues"},"homepage":"https://github.com/ashishbajaj99/mic#readme","gitHead":"fb4068d0589f746d767cdb2e576fff3ed3130175","_id":"mic@1.0.3","_shasum":"52a2a66a390566ef17690dc06bbc74c69788c075","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.3.0","_npmUser":{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"},"dist":{"shasum":"52a2a66a390566ef17690dc06bbc74c69788c075","tarball":"http://registry.npmjs.org/mic/-/mic-1.0.3.tgz"},"maintainers":[{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"}],"directories":{}},"2.0.0":{"name":"mic","version":"2.0.0","description":"A simple stream wrapper for arecord (Linux (including Raspbian)) and sox (Mac/Windows). Returns a Passthrough stream object so that stream control like pause(), resume(), pipe(), etc. are all available.","main":"index.js","scripts":{"test":"node tests/test.js"},"repository":{"type":"git","url":"git+https://github.com/ashishbajaj99/mic.git"},"keywords":["node-mic","microphone","sox","alsa","arecord","mic","audio","input"],"author":{"name":"Ashish Bajaj","email":"bajaj.ashish@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/ashishbajaj99/mic/issues"},"homepage":"https://github.com/ashishbajaj99/mic#readme","gitHead":"83251a25cfbaa9411a4665ccdd9ef2649e94403e","_id":"mic@2.0.0","_shasum":"8efad3ca4711f32f1238627ce750c586fb3b1b1f","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.2.0","_npmUser":{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"},"dist":{"shasum":"8efad3ca4711f32f1238627ce750c586fb3b1b1f","tarball":"http://registry.npmjs.org/mic/-/mic-2.0.0.tgz"},"maintainers":[{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"}],"_npmOperationalInternal":{"host":"packages-6-west.internal.npmjs.com","tmp":"tmp/mic-2.0.0.tgz_1454761399804_0.18803101521916687"},"directories":{}},"2.0.1":{"name":"mic","version":"2.0.1","description":"A simple stream wrapper for arecord (Linux (including Raspbian)) and sox (Mac/Windows). Returns a Passthrough stream object so that stream control like pause(), resume(), pipe(), etc. are all available.","main":"index.js","scripts":{"test":"node tests/test.js"},"repository":{"type":"git","url":"git+https://github.com/ashishbajaj99/mic.git"},"keywords":["node-mic","microphone","sox","alsa","arecord","mic","audio","input"],"author":{"name":"Ashish Bajaj","email":"bajaj.ashish@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/ashishbajaj99/mic/issues"},"homepage":"https://github.com/ashishbajaj99/mic#readme","gitHead":"2ef11a47362d5d3d61eb288602f01b542b97023e","_id":"mic@2.0.1","_shasum":"3083e6b621fcfa56dcfb0197a80dc4217c456675","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.2.0","_npmUser":{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"},"dist":{"shasum":"3083e6b621fcfa56dcfb0197a80dc4217c456675","tarball":"http://registry.npmjs.org/mic/-/mic-2.0.1.tgz"},"maintainers":[{"name":"ashishbajaj99","email":"bajaj.ashish@gmail.com"}],"_npmOperationalInternal":{"host":"packages-6-west.internal.npmjs.com","tmp":"tmp/mic-2.0.1.tgz_1454820627331_0.3396869588177651"},"directories":{}}},"homepage":"https://github.com/ashishbajaj99/mic#readme","keywords":["node-mic","microphone","sox","alsa","arecord","mic","audio","input"],"repository":{"type":"git","url":"git+https://github.com/ashishbajaj99/mic.git"},"author":{"name":"Ashish Bajaj","email":"bajaj.ashish@gmail.com"},"bugs":{"url":"https://github.com/ashishbajaj99/mic/issues"},"license":"MIT","readmeFilename":"README.md","users":{"ashishbajaj99":true},"_attachments":{}}